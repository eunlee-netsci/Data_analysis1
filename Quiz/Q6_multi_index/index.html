
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Pandas Quiz - 이메일 + 시트 병행 저장</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f8f9fa;
      padding: 2rem;
      max-width: 700px;
      margin: auto;
    }
    .question-card {
      background: white;
      border-radius: 10px;
      padding: 1rem;
      margin-bottom: 1rem;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
    }
    label {
      display: block;
      margin: 0.5rem 0;
    }
    input[type="text"], button {
      font-size: 1rem;
      padding: 0.5rem;
      width: 100%;
    }
    button {
      background-color: #0d6efd;
      color: white;
      border: none;
      border-radius: 8px;
      margin-top: 1rem;
    }
  </style>
</head>
<body>

<h2>📊 Pandas 퀴즈</h2>

<form action="https://formsubmit.co/leeeun309@gmail.com" method="POST" onsubmit="return prepareSubmission();">
  <input type="hidden" name="_subject" value="퀴즈 제출 결과">
  <input type="hidden" name="Name" id="hidden_name">
  <input type="hidden" name="Score" id="hidden_score">

  <div class="question-card">
    <label for="student_name">이름:</label>
    <input type="text" id="student_name" placeholder="이름을 입력하세요">
  </div>

  <div class="question-card">
    <label>Q1. MultiIndex의 주요 이점은?</label>
    <label><input type="radio" name="q1"> 단순한 필터링</label>
    <label><input type="radio" name="q1"> 데이터 무결성 보장</label>
    <label><input type="radio" name="q1"> 로딩 속도 향상</label>
    <label><input type="radio" name="q1" id="q1_correct"> 복잡한 구조 표현</label>
  </div>

  <div class="question-card">
    <label>Q2. pivot_table의 주요 기능은? (2개 선택)</label>
    <label><input type="checkbox" name="q2"> wide → tall 변환</label>
    <label><input type="checkbox" name="q2" id="q2_correct1"> 결측값 처리</label>
    <label><input type="checkbox" name="q2"> 정렬 순서 커스터마이징</label>
    <label><input type="checkbox" name="q2" id="q2_correct2"> 그룹별 집계</label>
  </div>

  <div class="question-card">
    <label>Q3. unstack 메서드의 효과는?</label>
    <label><input type="radio" name="q3"> 열 정렬</label>
    <label><input type="radio" name="q3" id="q3_correct"> 행 인덱스를 열로 변환</label>
    <label><input type="radio" name="q3"> tall → wide 변환</label>
    <label><input type="radio" name="q3"> 데이터 병합</label>
  </div>

  <div class="question-card">
    <label>Q4. MultiIndex를 생성하는 메서드는? (2개 선택)</label>
    <label><input type="checkbox" name="q4"> sort_index</label>
    <label><input type="checkbox" name="q4"> melt</label>
    <label><input type="checkbox" name="q4"> stack</label>
    <label><input type="checkbox" name="q4"> unstack</label>
    <label><input type="checkbox" name="q4" id="q4_correct"> set_index</label>
  </div>

  <button type="submit">전체 제출</button>
</form>

<script>
function prepareSubmission() {
  const name = document.getElementById("student_name").value.trim();
  if (!name) {
    alert("이름을 입력하세요.");
    return false;
  }

  let score = 0;
  const q2 = document.getElementsByName("q2");
  const q4 = document.getElementsByName("q4");

  if (document.getElementById("q1_correct").checked) score++;
  if (q2[1].checked && q2[3].checked && !q2[0].checked && !q2[2].checked) score++;
  if (document.getElementById("q3_correct").checked) score++;
  if (q4[2].checked && document.getElementById("q4_correct").checked &&
      !q4[0].checked && !q4[1].checked && !q4[3].checked) score++;

  document.getElementById("hidden_name").value = name;
  document.getElementById("hidden_score").value = score;

  // Google Sheets 동시 저장
  fetch("https://script.google.com/macros/s/AKfycby26yC7-ZLD-k5bN7KQm2jXlda-I5twPhc-W28TdUsNrOFcYzi6A6hF9ZV5IWlcZeU-/exec", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ name: name, score: score })
  });

  return true; // FormSubmit으로 계속 진행
}
</script>

</body>
</html>
